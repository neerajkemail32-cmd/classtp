<!DOCTYPE html>
<html>
<head>
  <title>Announcements</title>
</head>
<body>
  <h2>Post Announcement</h2>

  <form id="announcementForm">
    <label>Title:</label><br>
    <input type="text" id="title" required><br><br>

    <label>Message:</label><br>
    <textarea id="message" required></textarea><br><br>

    <label>Date:</label><br>
    <input type="date" id="date" required><br><br>

    <label>Time:</label><br>
    <input type="time" id="time" required><br><br>

    <button type="submit">Post</button>
  </form>

  <h3>All Announcements</h3>
  <div id="announcementList"></div>

  <script>
    // Post announcement
    document.getElementById("announcementForm").addEventListener("submit", function(e) {
      e.preventDefault();
      const data = {
        title: document.getElementById("title").value,
        message: document.getElementById("message").value,
        date: document.getElementById("date").value,
        time: document.getElementById("time").value
      };
      fetch("/announcements", {
        method: "POST",
        headers: { "Content-Type": "application/json" },
        body: JSON.stringify(data)
      })
      .then(res => res.text())
      .then(msg => {
        alert(msg);
        loadAnnouncements();
        document.getElementById("announcementForm").reset();
      });
    });

    // Show announcements
    function loadAnnouncements() {
      fetch("/announcements")
      .then(res => res.json())
      .then(data => {
        let html = "";
        data.forEach(a => {
          html += `<p><b>${a.title}</b><br>${a.message}<br>${a.date} ${a.time}</p><hr>`;
        });
        document.getElementById("announcementList").innerHTML = html;
      });
    }

    loadAnnouncements();
  </script>
</body>
</html>
